<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>4 Usage</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cis.ohio-state.edu/~gurari/TeX4ht/mn.html)"> 
<meta name="originator" content="TeX4ht (http://www.cis.ohio-state.edu/~gurari/TeX4ht/mn.html)"> 
<!-- html,2 --> 
<meta name="src" content="tpg.tex"> 
<meta name="date" content="2004-04-30 11:35:00"> 
<link rel="stylesheet" type="text/css" href="tpg.css"> 
</head><body 
>
   <div class="crosslinks"><p class="noindent">[<a 
href="tpgch5.html" >next</a>] [<a 
href="#tailtpgch4.html">tail</a>] [<a 
href="tpgpa2.html#tpgch4.html" >up</a>] </p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter&nbsp;4</span><br><a 
  id="x16-210004"></a>Usage</h2>
   <h3 class="sectionHead"><span class="titlemark">4.1   </span> <a 
  id="x16-220004.1"></a>Package content</h3>
<!--l. 3--><p class="noindent">TPG is a package which main function is to define a class which particular metaclass converts a doc
string into a parser. You only need to import TPG and use these five objects:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">tpg.Parser:</span> </dt><dd 
class="description">This is the base class of the parsers you want to define.
     </dd><dt class="description">
<span 
class="cmbx-10">tpg.Error:</span> </dt><dd 
class="description">This exception is the base of all TPG exceptions.
     </dd><dt class="description">
<span 
class="cmbx-10">tpg.LexicalError:</span> </dt><dd 
class="description">This exception is raised when the lexer fails.
     </dd><dt class="description">
<span 
class="cmbx-10">tpg.SyntacticError:</span> </dt><dd 
class="description">This exception is raised when the parser fails.
                                                                                 

                                                                                 
     </dd><dt class="description">
<span 
class="cmbx-10">tpg.SemanticError:</span> </dt><dd 
class="description">This  exception  is  raised  by  the  grammar  itself  when  some  semantic
     properties fail.</dd></dl>
<!--l. 20--><p class="indent">   The grammar must be in the doc string of the class (see figure&nbsp; <a 
href="#x16-220011">4.1<!--tex4ht:ref: usage:embed --></a>).
<!--l. 22--><p class="indent">   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                 

                                                                                 
<a 
  id="x16-220011"></a>
                                                                                 

                                                                                 
   <div class="tabular"><table class="tabular" 
cellspacing="0pt" cellpadding="0" rules="groups" 
frame="border" id="TBL-11-" ><colgroup id="TBL-11-1g"><col 
id="TBL-11-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 valign="baseline" id="TBL-11-1-"><td  align="left" id="TBL-11-1-1"  
class="td11"><br> <table class="caption" 
><tr valign="baseline" class="caption"><td class="id">Figure&nbsp;4.1: </td><td  
class="content">Grammar embeding example</td></tr></table><!--tex4ht:label?: x16-220011 -->
<table width="100%" 
class="verbatim"><tr class="verbatim"><td 
class="verbatim"><div class="verbatim">
&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;Foo(tpg.Parser):
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r&#34;&#34;&#34;
&nbsp;<br />
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;START/x&nbsp;-&gt;&nbsp;Bar/x&nbsp;;
&nbsp;<br />
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bar/x&nbsp;-&gt;&nbsp;'bar'/x&nbsp;;
&nbsp;<br />
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;&#34;&#34;
</div>
</td></tr></table>                                                                                 </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 valign="baseline" id="TBL-11-2-"><td  align="left" id="TBL-11-2-1"  
class="td11">                                                                                                                               </td> </tr></table>
</div>
<!--l. 34--><p class="nopar">
                                                                                 

                                                                                 
   </td></tr></table></div><hr class="endfigure">
<!--l. 34--><p class="nopar">
<!--l. 36--><p class="indent">   Then you can use the new generated parser. The parser is simply a Python class (see figure&nbsp;
<a 
href="#x16-220022">4.2<!--tex4ht:ref: usage:inst --></a>).
<!--l. 38--><p class="indent">   <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                 

                                                                                 
<a 
  id="x16-220022"></a>
                                                                                 

                                                                                 
   <div class="tabular"><table class="tabular" 
cellspacing="0pt" cellpadding="0" rules="groups" 
frame="border" id="TBL-12-" ><colgroup id="TBL-12-1g"><col 
id="TBL-12-1"></colgroup><tr 
class="hline"><td><hr></td></tr><tr  
 valign="baseline" id="TBL-12-1-"><td  align="left" id="TBL-12-1-1"  
class="td11"><br> <table class="caption" 
><tr valign="baseline" class="caption"><td class="id">Figure&nbsp;4.2: </td><td  
class="content">Parser usage example</td></tr></table><!--tex4ht:label?: x16-220022 -->
<table width="100%" 
class="verbatim"><tr class="verbatim"><td 
class="verbatim"><div class="verbatim">
&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;=&nbsp;&#34;bar&#34;
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;my_parser&nbsp;=&nbsp;Foo()
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;my_parser(test)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Uses&nbsp;the&nbsp;START&nbsp;symbol
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;x
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;my_parser.parse('Bar',&nbsp;test)&nbsp;&nbsp;#&nbsp;Uses&nbsp;the&nbsp;Bar&nbsp;symbol
&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;x
</div>
</td></tr></table>                                                                                 </td>
</tr><tr 
class="hline"><td><hr></td></tr><tr  
 valign="baseline" id="TBL-12-2-"><td  align="left" id="TBL-12-2-1"  
class="td11">                                                                                                                               </td> </tr></table>
</div>
<!--l. 48--><p class="nopar">
                                                                                 

                                                                                 
   </td></tr></table></div><hr class="endfigure">
<!--l. 48--><p class="nopar">
   <h3 class="sectionHead"><span class="titlemark">4.2   </span> <a 
  id="x16-230004.2"></a>Command line usage</h3>
<!--l. 52--><p class="noindent">The <span 
class="cmti-10">tpg </span>script reads a Python script and replaces TPG grammars (in doc string) by Python code. To
produce a Python script (*.py) from a script containing grammars (*.pyg) you can use <span 
class="cmti-10">tpg </span>as
follow:
                                                                                 

                                                                                 
   <table width="100%" 
class="verbatim"><tr class="verbatim"><td 
class="verbatim"><div class="verbatim">
&nbsp;&nbsp;&nbsp;&nbsp;tpg&nbsp;[-v|-vv]&nbsp;grammar.pyg&nbsp;[-o&nbsp;parser.py]
</div>
   </td></tr></table>
<!--l. 59--><p class="indent">   <span 
class="cmti-10">tpg </span>accepts some options on the command line:
     <dl class="description"><dt class="description">
<span 
class="cmbx-10">-v</span> </dt><dd 
class="description">turns <span 
class="cmti-10">tpg </span>into a verbose mode (it displays parser names).
     </dd><dt class="description">
<span 
class="cmbx-10">-vv</span> </dt><dd 
class="description">turns <span 
class="cmti-10">tpg </span>into a more verbose mode (it displays parser names and simplified rules).
     </dd><dt class="description">
<span 
class="cmbx-10">-o file.py</span> </dt><dd 
class="description">tells <span 
class="cmti-10">tpg </span>to generate the parser in <span 
class="cmti-10">file.py</span>. The default output file is <span 
class="cmti-10">grammar.py </span>if -o
     option is not provided and <span 
class="cmti-10">grammar.pyg </span>is the name of the grammar.</dd></dl>
<!--l. 67--><p class="indent">   Notice that .pyg files are valid Python scripts. So you can choose the run .pyg file (slower startup
but easier for debugging purpose) or turn them into a .py file (faster startup but needs a
&#8221;precompilation&#8221; stage). You can also write .py scripts containing grammars to be used as Python
scripts.
<!--l. 70--><p class="indent">   In fact I only use the <span 
class="cmti-10">tpg </span>script to convert <span 
class="cmti-10">tpg.pyg </span>into <span 
class="cmti-10">tpg.py </span>because TPG needs obviously to be a
pure Python script (it can not translate itself at runtime). Then in most cases it is very convenient to
directly write grammars in Python scripts.
                                                                                 

                                                                                 
   <div class="crosslinks"><p class="noindent">[<a 
href="tpgch5.html" >next</a>] [<a 
href="tpgch4.html" >front</a>] [<a 
href="tpgpa2.html#tpgch4.html" >up</a>] </p></div>
<!--l. 101--><p class="indent">   <a 
  id="tailtpgch4.html"></a>   
</body></html> 
