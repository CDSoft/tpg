<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>9 Complete interactive calculator</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cis.ohio-state.edu/~gurari/TeX4ht/mn.html)"> 
<!-- html,2 --> 
<meta name="src" content="tpg.tex"> 
<meta name="date" content="2002-08-22 23:00:00"> 
<link rel="stylesheet" type="text/css" href="tpg.css"> 
</head><body 
>
   <div class="crosslinks"><p class="noindent">[<a 
href="tpgch10.html" >next</a>] [<a 
href="#tailtpgch9.html">tail</a>] [<a 
href="tpgpa3.html#tpgch9.html" >up</a>] </p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter&nbsp;9</span><br><a 
  name="x25-890009"></a>Complete interactive calculator</h2>
   <h3 class="sectionHead"><span class="titlemark">9.1</span> <a 
  name="x25-900009.1"></a>Introduction</h3>
<!--l. 3--><p class="noindent">This chapter presents an extention of the calculator described in the tutorial (see&nbsp;<a 
href="tpgch3.html#x12-140003">3<!--tex4ht:ref: tpg:tutorial--></a>). This calculator has
more functions and a memory.
   <h3 class="sectionHead"><span class="titlemark">9.2</span> <a 
  name="x25-910009.2"></a>New functions</h3>
   <h4 class="subsectionHead"><span class="titlemark">9.2.1</span> <a 
  name="x25-920009.2.1"></a>Trigonometric and other functions</h4>
<!--l. 10--><p class="noindent">This calculator can compute some numerical functions (<span 
class="cmti-10">sin</span>, <span 
class="cmti-10">cos</span>, <span 
class="cmti-10">sqrt</span>, ...). The <span 
class="cmti-10">make</span><span 
class="cmti-10">_op </span>function
(see figure&nbsp;<a 
href="tpgch3.html#x12-170014">3.4<!--tex4ht:ref: tut:make_op--></a>) has been extended to return these functions. Tokens must also be defined
to scan function names. <span 
class="cmti-10">funct1 </span>defines the name of unaries functions and <span 
class="cmti-10">funct2 </span>defines
the name of binaries functions. Finally the grammar rule of the atoms has been added a
branch to parse functions. The <span 
class="cmti-10">Function </span>non terminal symbol parser unaries and binaries
functions.
   <h4 class="subsectionHead"><span class="titlemark">9.2.2</span> <a 
  name="x25-930009.2.2"></a>Memories</h4>
<!--l. 19--><p class="noindent">The calculator has memories. A memory cell is identified by a name. For example, if the user types
<span 
class="cmmi-10">pi </span>= 4 <span 
class="cmsy-10">* </span><span 
class="cmmi-10">atan</span>(1), the memory cell named <span 
class="cmti-10">pi </span>will contain the value of <span 
class="cmmi-10"><img 
src="cmmi10-19.gif" alt="p" class="10x-x-19"> </span>and <span 
class="cmmi-10">cos</span>(<span 
class="cmmi-10">pi</span>) will return
<span 
class="cmsy-10">-</span>1.
<!--l. 23--><p class="indent">   To display the content of the whole memory, the user can type <span 
class="cmti-10">vars</span>.
<!--l. 25--><p class="indent">   The variables are saved in a dictionnary. In fact the parser itself is a dictionnary (the parser inherits
from the <span 
class="cmti-10">dict </span>class).
<!--l. 28--><p class="indent">   The <span 
class="cmti-10">START </span>symbol parses a variable creation or a single expression and the <span 
class="cmti-10">Atom </span>parses variable
names (the <span 
class="cmti-10">Var </span>symbol parses a variable name and returns its value).
   <h3 class="sectionHead"><span class="titlemark">9.3</span> <a 
  name="x25-940009.3"></a>Source code</h3>
   <h4 class="subsectionHead"><span class="titlemark">9.3.1</span> <a 
  name="x25-950009.3.1"></a>TPG grammar</h4>
<!--l. 34--><p class="noindent">The calculator source code can be a grammar for TPG. I.e. the <span 
class="cmti-10">calc.g </span>file is translated into a <span 
class="cmti-10">calc.py</span>
script by TPG. Just type in:
                                                                                 

                                                                                 
   <table width="100%" 
class="verbatim"><tr class="verbatim"><td 
class="verbatim"><div class="verbatim">
&nbsp;&nbsp;&nbsp;&nbsp;tpg&nbsp;calc.g
</div>
   </td></tr></table>
<!--l. 41--><p class="indent">   Here is the complete source code (<span 
class="cmti-10">calc.g</span>):
   <div class="verbatimtabinput">
<span 
class="cmtt-10">set</span><span 
class="cmtt-10">&nbsp;magic</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;&#34;/usr/bin/env</span><span 
class="cmtt-10">&nbsp;python&#34;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">{{</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;math</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;operator</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;string</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">}}</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">parser</span><span 
class="cmtt-10">&nbsp;Calc(dict):</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">{{</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;def</span><span 
class="cmtt-10">&nbsp;mem(self):</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;vars</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;self.items()</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;vars.sort()</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;memory</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;[</span><span 
class="cmtt-10">&nbsp;&#34;%s</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;%s&#34;%(var,</span><span 
class="cmtt-10">&nbsp;val)</span><span 
class="cmtt-10">&nbsp;for</span><span 
class="cmtt-10">&nbsp;(var,</span><span 
class="cmtt-10">&nbsp;val)</span><span 
class="cmtt-10">&nbsp;in</span><span 
class="cmtt-10">&nbsp;vars</span><span 
class="cmtt-10">&nbsp;]</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;return</span><span 
class="cmtt-10">&nbsp;&#34;\n\t&#34;</span><span 
class="cmtt-10">&nbsp;+</span><span 
class="cmtt-10">&nbsp;&#34;\n\t&#34;.join(memory)</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;def</span><span 
class="cmtt-10">&nbsp;make_op(self,</span><span 
class="cmtt-10">&nbsp;op):</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;return</span><span 
class="cmtt-10">&nbsp;{</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'+'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.add,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'-'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.sub,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'*'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.mul,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'/'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.div,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'%'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.mod,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'^'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x,y:x**y,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'**'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x,y:x**y,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'cos'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;math.cos,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'sin'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;math.sin,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'tan'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;math.tan,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'acos':</span><span 
class="cmtt-10">&nbsp;math.acos,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'asin':</span><span 
class="cmtt-10">&nbsp;math.asin,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'atan':</span><span 
class="cmtt-10">&nbsp;math.atan,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'sqr'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x:x*x,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'sqrt':</span><span 
class="cmtt-10">&nbsp;math.sqrt,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'abs'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;abs,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'norm':</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x,y:math.sqrt(x*x+y*y),</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;}[op]</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">}}</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">separator</span><span 
class="cmtt-10">&nbsp;space:</span><span 
class="cmtt-10">&nbsp;'\s+'</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;pow_op:</span><span 
class="cmtt-10">&nbsp;'\^|\*\*'</span><span 
class="cmtt-10">&nbsp;self.make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;add_op:</span><span 
class="cmtt-10">&nbsp;'[+-]'</span><span 
class="cmtt-10">&nbsp;self.make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;mul_op:</span><span 
class="cmtt-10">&nbsp;'[*/%]'</span><span 
class="cmtt-10">&nbsp;self.make_op</span><span 
class="cmtt-10">&nbsp;;</span>
                                                                                 

                                                                                 
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;funct1:</span><span 
class="cmtt-10">&nbsp;'(cos|sin|tan|acos|asin|atan|sqr|sqrt|abs)\b'</span><span 
class="cmtt-10">&nbsp;self.make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;funct2:</span><span 
class="cmtt-10">&nbsp;'(norm)\b'</span><span 
class="cmtt-10">&nbsp;self.make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;real:</span><span 
class="cmtt-10">&nbsp;'(\d+\.\d*|\d*\.\d+)([eE][-+]?\d+)?|\d+[eE][-+]?\d+'</span><span 
class="cmtt-10">&nbsp;string.atof</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;integer:</span><span 
class="cmtt-10">&nbsp;'\d+'</span><span 
class="cmtt-10">&nbsp;string.atol</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;VarId:</span><span 
class="cmtt-10">&nbsp;'[a-zA-Z_]\w*'</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">START/e</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'vars'</span><span 
class="cmtt-10">&nbsp;e=self.mem&lt;&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;VarId/v</span><span 
class="cmtt-10">&nbsp;'='</span><span 
class="cmtt-10">&nbsp;Expr/e</span><span 
class="cmtt-10">&nbsp;self[v]=e</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Expr/e</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Var/self.get&lt;v,0&gt;</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;VarId/v</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Expr/e</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;Term/e</span><span 
class="cmtt-10">&nbsp;(</span><span 
class="cmtt-10">&nbsp;add_op/op</span><span 
class="cmtt-10">&nbsp;Term/t</span><span 
class="cmtt-10">&nbsp;e=op&lt;e,t&gt;</span><span 
class="cmtt-10">&nbsp;)*</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Term/t</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;Fact/t</span><span 
class="cmtt-10">&nbsp;(</span><span 
class="cmtt-10">&nbsp;mul_op/op</span><span 
class="cmtt-10">&nbsp;Fact/f</span><span 
class="cmtt-10">&nbsp;t=op&lt;t,f&gt;</span><span 
class="cmtt-10">&nbsp;)*</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Fact/f</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;add_op/op</span><span 
class="cmtt-10">&nbsp;Fact/f</span><span 
class="cmtt-10">&nbsp;f=op&lt;0,f&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Pow/f</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Pow/f</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;Atom/f</span><span 
class="cmtt-10">&nbsp;(</span><span 
class="cmtt-10">&nbsp;pow_op/op</span><span 
class="cmtt-10">&nbsp;Fact/e</span><span 
class="cmtt-10">&nbsp;f=op&lt;f,e&gt;</span><span 
class="cmtt-10">&nbsp;)?</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Atom/a</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;real/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;integer/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Function/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Var/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'\('</span><span 
class="cmtt-10">&nbsp;Expr/a</span><span 
class="cmtt-10">&nbsp;'\)'</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Function/y</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;funct1/f</span><span 
class="cmtt-10">&nbsp;'\('</span><span 
class="cmtt-10">&nbsp;Expr/x</span><span 
class="cmtt-10">&nbsp;'\)'</span><span 
class="cmtt-10">&nbsp;y</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;f&lt;x&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;funct2/f</span><span 
class="cmtt-10">&nbsp;'\('</span><span 
class="cmtt-10">&nbsp;Expr/x1</span><span 
class="cmtt-10">&nbsp;','</span><span 
class="cmtt-10">&nbsp;Expr/x2</span><span 
class="cmtt-10">&nbsp;'\)'</span><span 
class="cmtt-10">&nbsp;y</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;f&lt;x1,x2&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">main:</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">{{</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;print</span><span 
class="cmtt-10">&nbsp;&#34;Calc</span><span 
class="cmtt-10">&nbsp;(TPG</span><span 
class="cmtt-10">&nbsp;example)&#34;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;calc</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;Calc()</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;while</span><span 
class="cmtt-10">&nbsp;1:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;l</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;raw_input(&#34;\n:&#34;)</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;if</span><span 
class="cmtt-10">&nbsp;l:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;try:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;print</span><span 
class="cmtt-10">&nbsp;calc(l)</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;except</span><span 
class="cmtt-10">&nbsp;Exception,</span><span 
class="cmtt-10">&nbsp;e:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;print</span><span 
class="cmtt-10">&nbsp;e</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;else:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;break</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">}}</span>
                                                                                 

                                                                                 
   </div>
   <h4 class="subsectionHead"><span class="titlemark">9.3.2</span> <a 
  name="x25-960009.3.2"></a>Python script</h4>
<!--l. 47--><p class="noindent">The calculator can be directly embeded in a Python script. The grammar is in a string and compiled
using the <span 
class="cmti-10">tpg </span>module.
<!--l. 50--><p class="indent">   Here is the complete source code (<span 
class="cmti-10">calc2.py</span>):
   <div class="verbatimtabinput">
<span 
class="cmtt-10">#!/usr/bin/env</span><span 
class="cmtt-10">&nbsp;python</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;math</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;operator</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;string</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">import</span><span 
class="cmtt-10">&nbsp;tpg</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">def</span><span 
class="cmtt-10">&nbsp;make_op(op):</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;return</span><span 
class="cmtt-10">&nbsp;{</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'+'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.add,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'-'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.sub,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'*'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.mul,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'/'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.div,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'%'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;operator.mod,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'^'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x,y:x**y,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'**'</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x,y:x**y,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'cos'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;math.cos,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'sin'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;math.sin,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'tan'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;math.tan,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'acos':</span><span 
class="cmtt-10">&nbsp;math.acos,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'asin':</span><span 
class="cmtt-10">&nbsp;math.asin,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'atan':</span><span 
class="cmtt-10">&nbsp;math.atan,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'sqr'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x:x*x,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'sqrt':</span><span 
class="cmtt-10">&nbsp;math.sqrt,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'abs'</span><span 
class="cmtt-10">&nbsp;:</span><span 
class="cmtt-10">&nbsp;abs,</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'norm':</span><span 
class="cmtt-10">&nbsp;lambda</span><span 
class="cmtt-10">&nbsp;x,y:math.sqrt(x*x+y*y),</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;}[op]</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">exec(tpg.compile(r&#34;&#34;&#34;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">parser</span><span 
class="cmtt-10">&nbsp;Calc(dict):</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">{{</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;def</span><span 
class="cmtt-10">&nbsp;mem(self):</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;vars</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;self.items()</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;vars.sort()</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;memory</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;[</span><span 
class="cmtt-10">&nbsp;&#34;%s</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;%s&#34;%(var,</span><span 
class="cmtt-10">&nbsp;val)</span><span 
class="cmtt-10">&nbsp;for</span><span 
class="cmtt-10">&nbsp;(var,</span><span 
class="cmtt-10">&nbsp;val)</span><span 
class="cmtt-10">&nbsp;in</span><span 
class="cmtt-10">&nbsp;vars</span><span 
class="cmtt-10">&nbsp;]</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;return</span><span 
class="cmtt-10">&nbsp;&#34;\n\t&#34;</span><span 
class="cmtt-10">&nbsp;+</span><span 
class="cmtt-10">&nbsp;&#34;\n\t&#34;.join(memory)</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">}}</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">separator</span><span 
class="cmtt-10">&nbsp;space:</span><span 
class="cmtt-10">&nbsp;'\s+'</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;pow_op:</span><span 
class="cmtt-10">&nbsp;'\^|\*\*'</span><span 
class="cmtt-10">&nbsp;make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;add_op:</span><span 
class="cmtt-10">&nbsp;'[+-]'</span><span 
class="cmtt-10">&nbsp;make_op</span><span 
class="cmtt-10">&nbsp;;</span>
                                                                                 

                                                                                 
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;mul_op:</span><span 
class="cmtt-10">&nbsp;'[*/%]'</span><span 
class="cmtt-10">&nbsp;make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;funct1:</span><span 
class="cmtt-10">&nbsp;'(cos|sin|tan|acos|asin|atan|sqr|sqrt|abs)\b'</span><span 
class="cmtt-10">&nbsp;make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;funct2:</span><span 
class="cmtt-10">&nbsp;'(norm)\b'</span><span 
class="cmtt-10">&nbsp;make_op</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;real:</span><span 
class="cmtt-10">&nbsp;'(\d+\.\d*|\d*\.\d+)([eE][-+]?\d+)?|\d+[eE][-+]?\d+'</span><span 
class="cmtt-10">&nbsp;string.atof</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;integer:</span><span 
class="cmtt-10">&nbsp;'\d+'</span><span 
class="cmtt-10">&nbsp;string.atol</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">token</span><span 
class="cmtt-10">&nbsp;VarId:</span><span 
class="cmtt-10">&nbsp;'[a-zA-Z_]\w*'</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">START/e</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'vars'</span><span 
class="cmtt-10">&nbsp;e=self.mem&lt;&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;VarId/v</span><span 
class="cmtt-10">&nbsp;'='</span><span 
class="cmtt-10">&nbsp;Expr/e</span><span 
class="cmtt-10">&nbsp;self[v]=e</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Expr/e</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Var/self.get&lt;v,0&gt;</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;VarId/v</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Expr/e</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;Term/e</span><span 
class="cmtt-10">&nbsp;(</span><span 
class="cmtt-10">&nbsp;add_op/op</span><span 
class="cmtt-10">&nbsp;Term/t</span><span 
class="cmtt-10">&nbsp;e=op&lt;e,t&gt;</span><span 
class="cmtt-10">&nbsp;)*</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Term/t</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;Fact/t</span><span 
class="cmtt-10">&nbsp;(</span><span 
class="cmtt-10">&nbsp;mul_op/op</span><span 
class="cmtt-10">&nbsp;Fact/f</span><span 
class="cmtt-10">&nbsp;t=op&lt;t,f&gt;</span><span 
class="cmtt-10">&nbsp;)*</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Fact/f</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;add_op/op</span><span 
class="cmtt-10">&nbsp;Fact/f</span><span 
class="cmtt-10">&nbsp;f=op&lt;0,f&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Pow/f</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Pow/f</span><span 
class="cmtt-10">&nbsp;-&gt;</span><span 
class="cmtt-10">&nbsp;Atom/f</span><span 
class="cmtt-10">&nbsp;(</span><span 
class="cmtt-10">&nbsp;pow_op/op</span><span 
class="cmtt-10">&nbsp;Fact/e</span><span 
class="cmtt-10">&nbsp;f=op&lt;f,e&gt;</span><span 
class="cmtt-10">&nbsp;)?</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Atom/a</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;real/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;integer/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Function/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;Var/a</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;'\('</span><span 
class="cmtt-10">&nbsp;Expr/a</span><span 
class="cmtt-10">&nbsp;'\)'</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">Function/y</span><span 
class="cmtt-10">&nbsp;-&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;funct1/f</span><span 
class="cmtt-10">&nbsp;'\('</span><span 
class="cmtt-10">&nbsp;Expr/x</span><span 
class="cmtt-10">&nbsp;'\)'</span><span 
class="cmtt-10">&nbsp;y</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;f&lt;x&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;|</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;funct2/f</span><span 
class="cmtt-10">&nbsp;'\('</span><span 
class="cmtt-10">&nbsp;Expr/x1</span><span 
class="cmtt-10">&nbsp;','</span><span 
class="cmtt-10">&nbsp;Expr/x2</span><span 
class="cmtt-10">&nbsp;'\)'</span><span 
class="cmtt-10">&nbsp;y</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;f&lt;x1,x2&gt;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;;</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&#34;&#34;&#34;))</span>
<span 
class="cmtt-10">&nbsp;</span><br />
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">print</span><span 
class="cmtt-10">&nbsp;&#34;Calc</span><span 
class="cmtt-10">&nbsp;(TPG</span><span 
class="cmtt-10">&nbsp;example)&#34;</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">calc</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;Calc()</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">while</span><span 
class="cmtt-10">&nbsp;1:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;l</span><span 
class="cmtt-10">&nbsp;=</span><span 
class="cmtt-10">&nbsp;raw_input(&#34;\n:&#34;)</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;if</span><span 
class="cmtt-10">&nbsp;l:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;try:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;print</span><span 
class="cmtt-10">&nbsp;calc(l)</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;except</span><span 
class="cmtt-10">&nbsp;Exception,</span><span 
class="cmtt-10">&nbsp;e:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;print</span><span 
class="cmtt-10">&nbsp;e</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;else:</span>
<span 
class="cmtt-10">&nbsp;</span><br /><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;</span><span 
class="cmtt-10">&nbsp;break</span>
   </div> <div class="crosslinks"><p class="noindent">[<a 
href="tpgch10.html" >next</a>] [<a 
href="tpgch9.html" >front</a>] [<a 
href="tpgpa3.html#tpgch9.html" >up</a>] </p></div><a 
  name="tailtpgch9.html"></a>    
</body></html> 
